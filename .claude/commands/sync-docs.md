# 문서 동기화

마지막 동기화 커밋 이후 변경된 코드를 분석하여 관련 문서를 자동으로 업데이트합니다.

## 1단계: 동기화 범위 파악

### 1-1. 마지막 동기화 커밋 확인

`docs/README.md`의 "문서 동기화 현황" 테이블에서 마지막 동기화 커밋 해시를 추출합니다.

### 1-2. 변경된 코드 파일 조회

```bash
git diff --name-only <last-commit>..HEAD
```

결과에서 `docs/` 경로는 제외하고 코드 파일만 필터링합니다.

## 2단계: 영향받는 문서 식별

`docs/README.md`의 **코드-문서 매핑** 테이블을 참조하여 변경된 코드에 해당하는 문서를 식별합니다.

### 매핑 규칙

1. **디렉토리 매핑**: `backend/src/auth/` → `docs/features/AUTH_FLOW.md`
2. **파일 패턴 매핑**: `*.entity.ts` → `docs/guides/ERD.md`
3. **중복 허용**: 하나의 코드가 여러 문서에 영향 가능

### 새 모듈/기능 감지

변경된 파일이 매핑 테이블에 없는 경우:
- 새로운 `backend/src/<module>/` 디렉토리 → 새 문서 생성 필요 여부 판단
- 기존 모듈 삭제 → 해당 문서 삭제 또는 내용 제거 필요 여부 판단

## 3단계: 문서 업데이트

각 영향받는 문서에 대해:

### 3-1. 변경 내용 분석

해당 코드 파일의 변경 사항을 분석합니다:
```bash
git diff <last-commit>..HEAD -- <file-path>
```

### 3-2. 문서 업데이트 유형 결정

| 변경 유형 | 문서 작업 |
|----------|----------|
| 새 API 엔드포인트 추가 | REST_ENDPOINTS.md에 엔드포인트 추가 |
| 새 소켓 이벤트 추가 | SOCKET_EVENTS.md에 이벤트 추가 |
| 엔티티 필드 변경 | ERD.md 테이블 상세 업데이트 |
| 새 모듈 추가 | 새 문서 생성 + README.md 목차 추가 |
| 모듈 삭제 | 문서 삭제 + README.md 목차 제거 |
| 기존 기능 수정 | 해당 문서 내용 수정 |

### 3-3. 문서 수정/생성/삭제 수행

**수정**: 기존 문서의 해당 섹션 업데이트
**생성**: 프로젝트 문서 스타일에 맞게 새 문서 작성
**삭제**: 파일 삭제 및 다른 문서의 참조 링크 제거

## 4단계: README.md 업데이트

### 4-1. 동기화 현황 테이블 업데이트

`docs/README.md`의 "문서 동기화 현황" 테이블을 현재 커밋 정보로 업데이트합니다:

```bash
git rev-parse --short HEAD  # 현재 커밋 해시
date +%Y-%m-%d              # 오늘 날짜
```

### 4-2. 목차 업데이트 (필요시)

새 문서 생성/삭제 시 해당 섹션의 테이블도 업데이트합니다.

### 4-3. 코드-문서 매핑 테이블 업데이트 (필요시)

새 모듈 추가 시 매핑 테이블에도 항목을 추가합니다.

## 5단계: 결과 리포트

아래 형식으로 결과를 출력합니다:

```
## 문서 동기화 결과

### 분석 범위
- 기준 커밋: `<last-sync-commit>`
- 현재 커밋: `<current-commit>`
- 변경된 코드 파일: N개

### 문서 변경 요약
| 작업 | 문서 | 상태 |
|------|------|------|
| 수정 | SOCKET_EVENTS.md | 완료 |
| 생성 | NEW_FEATURE.md | 완료 |
| 삭제 | DEPRECATED.md | 완료 |

### 상세 변경 내용
- SOCKET_EVENTS.md: focus_task_updated 이벤트 추가
- NEW_FEATURE.md: 새 기능 문서 생성
- DEPRECATED.md: 사용하지 않는 기능으로 삭제

### 동기화 현황
- docs/README.md 업데이트 완료
- 기준 커밋: `<last-sync-commit>` → `<current-commit>`
```

## 주의사항

- 문서 업데이트 시 기존 스타일과 형식을 유지합니다
- 불확실한 변경은 사용자에게 확인을 요청합니다
- 대규모 변경 시 섹션별로 나누어 처리합니다
