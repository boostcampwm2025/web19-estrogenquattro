(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{159:(e,t,s)=>{Promise.resolve().then(s.bind(s,8450)),Promise.resolve().then(s.bind(s,486)),Promise.resolve().then(s.bind(s,4478)),Promise.resolve().then(s.bind(s,5467))},486:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(546);let i=(0,s(3059).default)(()=>Promise.resolve(({children:e})=>(0,r.jsx)(r.Fragment,{children:e})),{ssr:!1})},4478:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var r=s(546),i=s(842),a=s(6346),o=s(5893);let n=null,l=()=>(n||(n=(0,o.io)("http://localhost:8080",{transports:["websocket"],withCredentials:!0,autoConnect:!1})),n);function d(e){let t=Math.floor(e/60),s="⏱️";if(t<60)s+=`${t}분`;else{let e=Math.floor(t/60),r=t%60;s+=`${e}시간`,r>0&&(s+=` ${r}분`)}return s}class h{constructor(e,t,s,r,i,a="face"){this.speed=300,this.scene=e,this.id=i,this.username=r,this.container=e.add.container(t,s),this.bodySprite=e.add.sprite(0,5,"body"),this.bodySprite.setFrame(0),this.maskShape=e.make.graphics({}),this.maskShape.fillStyle(0xffffff),this.maskShape.fillCircle(0,0,17),this.maskShape.x=t,this.maskShape.y=s;const o=this.maskShape.createGeometryMask(),n=e.textures.exists(a)?a:"face";this.faceSprite=e.add.image(0,0,n),this.faceSprite.setDisplaySize(34,34),this.faceSprite.setMask(o),this.borderGraphics=e.add.graphics(),this.borderGraphics.lineStyle(2,0xffffff,1),this.borderGraphics.strokeCircle(0,0,17);const l=e.add.text(0,50,r,{fontSize:"12px",color:"#ffffff",backgroundColor:"#00000088",padding:{x:4,y:2}}).setOrigin(.5);this.focusTimeText=e.add.text(0,66,d(0),{fontSize:"10px",color:"#ffffff",backgroundColor:"#00000088",padding:{x:4,y:2}}).setOrigin(.5),this.container.add([this.bodySprite,this.faceSprite,this.borderGraphics,l,this.focusTimeText]),this.container.setSize(34,51),e.physics.world.enable(this.container),this.body=this.container.body,this.body.setCollideWorldBounds(!0),this.body.setSize(34,51),this.body.setOffset(0,10)}update(){this.container&&this.maskShape&&(this.maskShape.x=this.container.x,this.maskShape.y=this.container.y)}updateFocusTime(e){this.focusTimeText&&this.focusTimeText.setText(d(e))}getPosition(){return{x:this.container.x,y:this.container.y}}getContainer(){return this.container}destroy(){this.container.destroy(),this.maskShape.destroy()}updateFaceTexture(e){this.faceSprite&&this.scene.textures.exists(e)&&(this.faceSprite.setTexture(e),this.faceSprite.setDisplaySize(34,34))}playAnimation(e,t=!0){this.bodySprite&&this.bodySprite.play(e,t)}stopAnimation(){this.bodySprite&&this.bodySprite.stop()}showChatBubble(e){let t=this.container.getByName("chatBubble");t&&t.destroy();let s=this.scene.add.container(0,-70);s.setName("chatBubble");let r=this.scene.add.text(0,0,e,{fontFamily:"Arial, sans-serif",fontSize:"12px",color:"#000000",wordWrap:{width:150,useAdvancedWrap:!0}});r.setOrigin(.5);let i=r.getBounds(),a=i.width+20,o=i.height+20,n=this.scene.add.graphics();n.fillStyle(0xffffff,1),n.fillRoundedRect(-a/2,-o/2,a,o,10),n.fillTriangle(-5,o/2,5,o/2,0,o/2+8),s.add([n,r]),this.container.add(s),this.scene.time.delayedCall(5e3,()=>{s.active&&s.destroy()}),this.container.bringToTop(s)}}class c extends h{constructor(e,t,s,r,i,a){super(e,t,s,r,i,r),this.prevState={isMoving:!1,direction:"stop"},this.roomId=a}setRoomId(e){this.roomId=e}update(e){if(super.update(),!this.body||!e)return;let t=0,s=0,r="",i="";e.left.isDown?(t=-this.speed,r="left"):e.right.isDown&&(t=this.speed,r="right"),e.up.isDown?(s=-this.speed,i="up"):e.down.isDown&&(s=this.speed,i="down"),this.body.setVelocity(t,s);let a=0!==t||0!==s;if(a){let e=this.body.blocked;"left"===r&&e.left&&(a=!1),"right"===r&&e.right&&(a=!1),"up"===i&&e.up&&(a=!1),"down"===i&&e.down&&(a=!1)}let o="stop";if(a&&(r&&i?o=`${r}-${i}`:r?o=r:i&&(o=i)),a?"left"===r?this.playAnimation("walk-left"):"right"===r?this.playAnimation("walk-right"):"up"===i?this.playAnimation("walk-up"):"down"===i&&this.playAnimation("walk-down"):this.stopAnimation(),a!==this.prevState.isMoving||o!==this.prevState.direction){var n;let e;n={roomId:this.roomId,userId:this.id,x:this.container.x,y:this.container.y,isMoving:a,direction:o,timestamp:Date.now()},(e=l()).connected&&e.emit("moving",n),this.prevState={isMoving:a,direction:o}}}}class m extends h{constructor(e,t,s,r,i,a){super(e,t,s,r,i,a)}updateState(e){this.body?(super.update(),a.Math.Distance.Between(this.container.x,this.container.y,e.x,e.y)>50&&this.container.setPosition(e.x,e.y),this.container.x=a.Math.Linear(this.container.x,e.x,.1),this.container.y=a.Math.Linear(this.container.y,e.y,.1),this.body.setVelocity(0),e.isMoving?(e.direction.includes("left")&&(this.body.setVelocityX(-this.speed),this.playAnimation("walk-left")),e.direction.includes("right")&&(this.body.setVelocityX(this.speed),this.playAnimation("walk-right")),e.direction.includes("up")&&(this.body.setVelocityY(-this.speed),this.playAnimation("walk-up")),e.direction.includes("down")&&(this.body.setVelocityY(this.speed),this.playAnimation("walk-down"))):(this.stopAnimation(),this.container.setPosition(e.x,e.y))):console.error("RemotePlayer body not found")}}var u=s(4563);class p extends a.Scene{constructor(){super({key:"MogakcoScene"}),this.minZoom=.7,this.maxZoom=2,this.tileSize=32,this.gridVisible=!0,this.otherPlayers=new Map,this.username="",this.roomId="",this.currentMapIndex=0,this.maps=[{image:"tiles1",tilemap:"tilemap1"},{image:"tiles2",tilemap:"tilemap2"}]}preload(){this.load.crossOrigin="anonymous",this.load.image("tiles1","/assets/tempMap1.png"),this.load.tilemapTiledJSON("tilemap1","/assets/temp1Tilemap.json"),this.load.image("tiles2","/assets/tempMap2.png"),this.load.tilemapTiledJSON("tilemap2","/assets/temp2Tilemap.json"),this.load.spritesheet("body","/assets/body.png",{frameWidth:64,frameHeight:64});let e=this.username||"boostcampwm2025";this.load.image("face",`https://avatars.githubusercontent.com/${e}`)}init(){let e=this.registry.get("user");this.username=e?.username}create(){this.setupMap(),this.createAnimations(),this.setupPlayer(),this.setupCollisions(),this.setupControls(),this.setupUI(),this.setupCamera(),this.setupSocket(),this.drawGrid(),this.setupChat()}createAnimations(){this.anims.exists("walk-down")||this.anims.create({key:"walk-down",frames:this.anims.generateFrameNumbers("body",{start:0,end:3}),frameRate:10,repeat:-1}),this.anims.exists("walk-left")||this.anims.create({key:"walk-left",frames:this.anims.generateFrameNumbers("body",{start:4,end:7}),frameRate:10,repeat:-1}),this.anims.exists("walk-right")||this.anims.create({key:"walk-right",frames:this.anims.generateFrameNumbers("body",{start:8,end:11}),frameRate:10,repeat:-1}),this.anims.exists("walk-up")||this.anims.create({key:"walk-up",frames:this.anims.generateFrameNumbers("body",{start:12,end:15}),frameRate:10,repeat:-1})}setupMap(){let e=this.maps[this.currentMapIndex],t=this.add.image(0,0,e.image);t.setOrigin(0,0),t.setName("mapImage"),t.setDepth(-1),this.physics.world.setBounds(0,0,t.width,t.height);let s=this.make.tilemap({key:e.tilemap});this.walls=this.physics.add.staticGroup();let r=s.getObjectLayer("Collisions");r&&r.objects.forEach(e=>{if(("class"in e&&"wall"===e.class||"wall"===e.type)&&void 0!==e.x&&void 0!==e.y){let t=this.add.rectangle(e.x+(e.width||0)/2,e.y+(e.height||0)/2,e.width,e.height,0xff0000,0);t.setVisible(!1),this.walls?.add(t)}})}setupPlayer(){let e=this.children.getByName("mapImage"),t=e.width,s=e.height,r=Math.floor(t/2/this.tileSize)*this.tileSize+this.tileSize/2,i=Math.floor(s/2/this.tileSize)*this.tileSize+this.tileSize/2,a=l(),o=a?.id||`guest-${Math.floor(1e3*Math.random())}`,n=this.username;this.player=new c(this,r,i,n,o,this.roomId||"pending")}setupControls(){this.input.keyboard&&(this.cursors=this.input.keyboard.createCursorKeys(),this.gridKey=this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.G),this.xKey=this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.X)),this.input.on("wheel",this.handleZoom,this)}setupUI(){var e;let t,s,r,i,a,o,n,l,d,h,c=this.children.getByName("mapImage").width;this.progressBarController&&this.progressBarController.destroy(),this.contributionController&&this.contributionController.destroy(),this.progressBarController=(e=this,t={width:384,height:24,x:c/2-192,y:50,radius:12,border:1},s=0,(r=e.add.graphics()).fillStyle(0xe5e7eb,1),r.fillRoundedRect(t.x,t.y,t.width,t.height,t.radius),r.lineStyle(t.border,2042167,1),r.strokeRoundedRect(t.x,t.y,t.width,t.height,t.radius),r.setDepth(1e3),(i=e.add.graphics()).setDepth(1001),(a=()=>{i.clear();let e=t.border+2,r=(t.width-2*e)*s/100;r>0&&(i.fillStyle(4906624,1),i.fillRoundedRect(t.x+e,t.y+e,r,t.height-2*e,t.radius-e))})(),o=(t,r)=>{e.tweens.add({targets:{value:s},value:t,duration:300,ease:"Cubic.easeOut",onUpdate:e=>{let t=e.getValue();"number"==typeof t&&(s=t,a())},onComplete:()=>{r?.()}})},n={addProgress:t=>{o(Math.min(s+t,100),()=>{s>=100&&(n.onProgressComplete?.(),e.time.delayedCall(1e3,()=>{o(0)}))})},setProgress:e=>{s=Math.max(0,Math.min(100,e)),a()},reset:()=>{o(0)},getProgress:()=>s,destroy:()=>{r.destroy(),i.destroy()}}),this.progressBarController.onProgressComplete=()=>{this.switchToNextMap()},this.contributionController=(l=new Map,(d=this.add.text(c/2,85,"",{fontSize:"14px",color:"#374151",fontFamily:"monospace"})).setOrigin(.5,0),d.setDepth(1e3),h=()=>{let e=Array.from(l.entries()).sort((e,t)=>t[1]-e[1]).slice(0,5);if(0===e.length)return void d.setText("");let t=e.map(([e,t])=>`${e}:${t}`).join("  ");d.setText(t)},{addContribution:(e,t)=>{let s=l.get(e)||0;l.set(e,s+t),h()},setContributions:e=>{for(let[t,s]of(l.clear(),Object.entries(e)))l.set(t,s);h()},reset:()=>{l.clear(),h()},destroy:()=>{d.destroy()}})}setupCollisions(){this.walls&&this.player&&this.physics.add.collider(this.player.getContainer(),this.walls),this.otherPlayers.forEach(e=>{this.walls&&this.physics.add.collider(e.getContainer(),this.walls)})}setupCamera(){let e=this.children.getByName("mapImage");e&&(this.cameras.main.setBounds(0,0,e.width,e.height),this.cameras.main.centerOn(e.width/2,e.height/2),this.player&&this.cameras.main.startFollow(this.player.getContainer(),!0,.05,.05),this.setInitialZoom(e.width,e.height))}setupChat(){let e=document.getElementById("chat-input");e&&e.remove();let t=document.createElement("input");t.id="chat-input",t.type="text",t.className="absolute bottom-[100px] left-1/2 -translate-x-1/2 w-[300px] p-[10px] rounded-[20px] border-[2px] border-[#333] bg-white hidden z-[1000] placeholder:text-gray-500 font-sans",t.placeholder="메시지를 입력하세요 (Enter로 전송)",document.body.appendChild(t),this.input.keyboard?.on("keydown-ENTER",()=>{document.activeElement!==t&&(t.style.display="block",t.focus(),this.input.keyboard.enabled=!1)}),t.addEventListener("keydown",e=>{e.stopPropagation(),"Enter"===e.key?(""!==t.value.trim()&&this.sendChat(t.value),this.closeChatInput(t)):"Escape"===e.key&&this.closeChatInput(t)}),this.events.on(a.Scenes.Events.SHUTDOWN,()=>{t.remove()})}closeChatInput(e){e.value="",e.style.display="none",e.blur(),this.input.keyboard.enabled=!0}sendChat(e){if(!this.player)return;this.player.showChatBubble(e);let t=l();t&&t.emit("chatting",{message:e})}setupSocket(){let e,t=((e=l()).connected||e.connect(),e);if(!t)return;let s=this.username;t.on("connect",()=>{this.player&&t.id&&(this.player.id=t.id),t.emit("joining",{x:this.player?.getContainer().x,y:this.player?.getContainer().y,username:s})}),t.on("joined",e=>{this.roomId=e.roomId,this.player&&this.player.setRoomId(e.roomId)}),t.on("session_replaced",()=>{t.disconnect(),this.showSessionEndedOverlay()}),t.on("players_synced",e=>{e.forEach(e=>{this.addRemotePlayer(e)})}),t.on("player_joined",e=>{this.addRemotePlayer(e)}),t.on("moved",e=>{let t=this.otherPlayers.get(e.userId);t&&void 0!==e.isMoving&&void 0!==e.direction&&t.updateState({x:e.x,y:e.y,isMoving:e.isMoving,direction:e.direction})}),t.on("player_left",e=>{let t=this.otherPlayers.get(e.userId);t&&(t.destroy(),this.otherPlayers.delete(e.userId))}),t.on("github_state",e=>{this.progressBarController?.setProgress(e.progress),this.contributionController?.setContributions(e.contributions)}),t.on("github_event",e=>{let t=2*e.pushCount+5*e.pullRequestCount;if(t>0){this.progressBarController?.addProgress(t);let s=e.pushCount+e.pullRequestCount;this.contributionController?.addContribution(e.username,s)}}),t.on("chatted",e=>{let t=this.otherPlayers.get(e.userId);t&&t.showChatBubble(e.message)})}addRemotePlayer(e){if(this.otherPlayers.has(e.userId)||this.player&&this.player.id===e.userId)return;let t=e.username||"unknown",s=new m(this,e.x,e.y,t,e.userId,t);if(this.otherPlayers.set(e.userId,s),this.walls&&this.physics.add.collider(s.getContainer(),this.walls),!this.textures.exists(t)){let e=`https://avatars.githubusercontent.com/${t}`;this.load.image(t,e),this.load.once(`filecomplete-image-${t}`,()=>{s.updateFaceTexture(t)}),this.load.start()}}setInitialZoom(e,t){let s=Math.max(this.scale.width/e,this.scale.height/t);this.cameras.main.setZoom(s)}handleZoom(e,t,s,r){let i=this.cameras.main.zoom,a=Math.max(this.minZoom,Math.min(this.maxZoom,i+(r>0?-.2:.2)));this.cameras.main.setZoom(a)}drawGrid(){let e=this.children.getByName("grid");e&&e.destroy();let t=this.children.getByName("mapImage");if(!t)return;let s=t.width,r=t.height,i=Math.ceil(s/this.tileSize),a=Math.ceil(r/this.tileSize),o=this.add.graphics();o.setName("grid"),o.lineStyle(1,65280,.3);for(let e=0;e<=i;e++)o.moveTo(e*this.tileSize,0),o.lineTo(e*this.tileSize,r);for(let e=0;e<=a;e++)o.moveTo(0,e*this.tileSize),o.lineTo(s,e*this.tileSize);o.strokePath(),o.setVisible(this.gridVisible)}toggleGrid(){this.gridVisible=!this.gridVisible;let e=this.children.getByName("grid");e&&e.setVisible(this.gridVisible)}showSessionEndedOverlay(){this.scene.pause();let e=this.add.rectangle(this.cameras.main.centerX,this.cameras.main.centerY,this.cameras.main.width,this.cameras.main.height,0,.7);e.setScrollFactor(0),e.setDepth(1e3);let t=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY,"다른 탭에서 접속하여\n현재 세션이 종료되었습니다.",{fontSize:"24px",color:"#ffffff",align:"center"});t.setOrigin(.5),t.setScrollFactor(0),t.setDepth(1001)}update(){if(!this.player||!this.cursors)return;if(this.gridKey&&a.Input.Keyboard.JustDown(this.gridKey)&&this.toggleGrid(),this.xKey&&a.Input.Keyboard.JustDown(this.xKey)){let e=100-(this.progressBarController?.getProgress()||0);e>0&&this.progressBarController?.addProgress(e)}let e=u.O.getState().focusTime;this.player&&this.player.updateFocusTime(e),this.player.update(this.cursors),this.otherPlayers.forEach(e=>e.update())}switchToNextMap(){this.currentMapIndex=(this.currentMapIndex+1)%this.maps.length,this.cameras.main.fadeOut(500,0,0,0),this.cameras.main.once("camerafadeoutcomplete",()=>{let e=this.children.getByName("mapImage");e&&e.destroy(),this.walls?.clear(!0,!0);let t=this.children.getByName("grid");t&&t.destroy(),this.setupMap(),this.setupCollisions(),this.setupUI(),this.setupCamera(),this.drawGrid(),this.cameras.main.fadeIn(500,0,0,0)})}}let g={type:a.AUTO,parent:"game-container",scale:{mode:a.Scale.RESIZE,width:"100%",height:"100%"},audio:{noAudio:!0},backgroundColor:"#000000",physics:{default:"arcade",arcade:{gravity:{x:0,y:0},debug:!0}},scene:[p]};var y=s(9873);function x(){let{user:e}=(0,y.n)(),t=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(!t.current)return t.current=new a.Game(g),e&&t.current.registry.set("user",e),()=>{t.current&&(t.current.destroy(!0),t.current=null)}},[e]),(0,r.jsx)("div",{id:"game-container",className:"h-full w-full"})}},4563:(e,t,s)=>{"use strict";s.d(t,{O:()=>r});let r=(0,s(7122).v)(e=>({focusTime:0,setFocusTime:t=>e({focusTime:t}),incrementFocusTime:()=>e(e=>({focusTime:e.focusTime+1})),resetFocusTime:()=>e({focusTime:0})}))},5467:(e,t,s)=>{"use strict";s.d(t,{default:()=>S});var r=s(546),i=s(842),a=s(5355),o=s(8742),n=s(4958),l=s(982);function d({className:e="",children:t,...s}){return(0,r.jsx)("button",{className:e,...s,children:t})}function h({time:e,isRunning:t,onToggle:s}){return(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"text-md text-retro-text-primary mb-3",children:"[ Focus Time ]"}),(0,r.jsx)("div",{className:"border-retro-border-dark bg-retro-bg-secondary shadow-retro-md mb-4 rounded-none border-3 p-6",children:(0,r.jsx)("div",{className:"text-retro-text-primary text-center text-3xl",children:e})}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(d,{onClick:s,className:"border-retro-border-darker bg-retro-button-bg text-retro-button-text shadow-retro-lg hover:bg-retro-button-hover flex flex-1 items-center justify-center gap-2 rounded-none border-2 py-2 transition-all active:translate-x-0.5 active:translate-y-0.5 active:shadow-none",children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.A,{className:"h-4 w-4"}),"정지"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),"시작"]})})})]})}var c=s(364),m=s(1696),u=s(4652),p=s(5371),g=s(249);function y({checked:e=!1,onCheckedChange:t,className:s=""}){return(0,r.jsx)("input",{type:"checkbox",checked:e,onChange:e=>t?.(e.target.checked),className:s})}function x({className:e="",...t}){return(0,r.jsx)("input",{className:e,...t})}function b({task:e,onToggle:t,onDelete:s,onToggleTimer:a,onEdit:o,formatTime:h}){let[c,b]=(0,i.useState)(!1),[f,w]=(0,i.useState)(e.text);return(0,r.jsxs)("div",{className:"group border-retro-border-dark bg-retro-bg-secondary shadow-retro-sm hover:border-retro-border-darker flex items-center gap-3 rounded-none border-2 px-3 py-3 transition-colors",children:[(0,r.jsx)(y,{checked:e.completed,onCheckedChange:()=>t(e.id),className:"data-[state=checked]:border-retro-border-darker data-[state=checked]:bg-retro-button-bg border-retro-border-dark h-5 w-5 rounded-none border-2"}),(0,r.jsx)("div",{className:"min-w-0 flex-1",children:c?(0,r.jsxs)("form",{onSubmit:t=>{t.preventDefault(),f.trim()&&(o(e.id,f.trim()),b(!1))},className:"flex gap-2",children:[(0,r.jsx)(x,{type:"text",value:f,onChange:e=>w(e.target.value),onKeyDown:e=>e.stopPropagation(),className:"border-retro-border-dark text-retro-text-primary h-8 flex-1 rounded-none border-2 bg-white px-2 text-sm",autoFocus:!0}),(0,r.jsx)(d,{type:"submit",className:"border-retro-border-darker bg-retro-button-bg text-retro-button-text hover:bg-retro-button-hover flex h-8 w-8 items-center justify-center rounded-none border-2",children:(0,r.jsx)(m.A,{className:"h-4 w-4"})}),(0,r.jsx)(d,{type:"button",className:"border-retro-border-darker bg-retro-border-light text-retro-button-text hover:bg-retro-button-bg flex h-8 w-8 items-center justify-center rounded-none border-2",onClick:()=>{w(e.text),b(!1)},children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:`text-sm ${e.completed?"text-retro-text-tertiary line-through":"text-retro-text-primary"}`,children:e.text}),(0,r.jsx)("div",{className:"text-retro-text-secondary mt-0.5 text-xs",children:h(e.time)})]})}),!c&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(d,{className:`flex h-8 w-8 items-center justify-center rounded-none border-2 transition-all ${e.isRunning?"border-retro-border-darker bg-retro-button-bg text-retro-button-text hover:bg-retro-button-hover":"border-retro-border-dark text-retro-text-secondary hover:bg-retro-hover-bg hover:text-retro-border-darker bg-transparent"}`,onClick:()=>a(e.id),children:e.isRunning?(0,r.jsx)(n.A,{className:"h-4 w-4"}):(0,r.jsx)(l.A,{className:"h-4 w-4"})}),(0,r.jsx)(d,{className:"border-retro-border-light text-retro-text-secondary hover:bg-retro-hover-bg hover:text-retro-border-darker flex h-8 w-8 items-center justify-center rounded-none border-2 bg-transparent transition-all",onClick:()=>{b(!0),w(e.text)},children:(0,r.jsx)(p.A,{className:"h-4 w-4"})}),(0,r.jsx)(d,{className:"border-retro-border-light text-retro-text-secondary hover:bg-retro-hover-darker hover:text-retro-delete-hover flex h-8 w-8 items-center justify-center rounded-none border-2 bg-transparent transition-all",onClick:()=>s(e.id),children:(0,r.jsx)(g.A,{className:"h-4 w-4"})})]})]})}function f({tasks:e,completedCount:t,totalCount:s,onAddTask:a,onToggleTask:o,onDeleteTask:n,onToggleTaskTimer:l,onEditTask:h,formatTaskTime:p}){let[g,y]=(0,i.useState)(""),[f,w]=(0,i.useState)(!1);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-md text-retro-text-primary",children:"[ Tasks ]"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-retro-text-primary text-sm",children:[t,"/",s]}),(0,r.jsx)(d,{onClick:()=>{w(!0)},className:"border-retro-border-darker bg-retro-button-bg text-retro-button-text shadow-retro-md hover:bg-retro-button-hover flex h-7 w-7 items-center justify-center rounded-none border-2 transition-all active:translate-x-0.5 active:translate-y-0.5 active:shadow-none",children:(0,r.jsx)(c.A,{className:"h-4 w-4"})})]})]}),f&&(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),g.trim()&&(a(g.trim()),y(""),w(!1))},className:"mb-3",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(x,{type:"text",value:g,onChange:e=>y(e.target.value),onKeyDown:e=>e.stopPropagation(),placeholder:"새 작업...",className:"border-retro-border-dark text-retro-text-primary placeholder:text-retro-text-tertiary flex-1 rounded-none border-2 bg-white px-3 py-2",autoFocus:!0}),(0,r.jsx)(d,{type:"submit",className:"border-retro-border-darker bg-retro-button-bg text-retro-button-text shadow-retro-md hover:bg-retro-button-hover flex h-8 w-8 items-center justify-center rounded-none border-2 active:shadow-none",children:(0,r.jsx)(m.A,{className:"h-4 w-4"})}),(0,r.jsx)(d,{type:"button",className:"border-retro-border-darker bg-retro-border-light text-retro-button-text shadow-retro-md hover:bg-retro-button-bg flex h-8 w-8 items-center justify-center rounded-none border-2 active:shadow-none",onClick:()=>{y(""),w(!1)},children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})]})}),(0,r.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,r.jsx)(b,{task:e,onToggle:o,onDelete:n,onToggleTimer:l,onEdit:h,formatTime:p},e.id))})]})}let w=e=>{let t=Math.floor(e/3600),s=Math.floor(e%3600/60);return`${String(t).padStart(2,"0")}:${String(s).padStart(2,"0")}:${String(e%60).padStart(2,"0")}`};var v=s(4563);let k=[{id:"1",text:"API 엔드포인트 상성 문서",completed:!1,time:0,isRunning:!1}];function S(){let e,t,[s,n]=(0,i.useState)(!0),{tasks:l,addTask:d,toggleTask:c,deleteTask:m,editTask:u,toggleTaskTimer:p,stopAllTasks:g,incrementTaskTime:y,completedCount:x,runningTask:b}=((e=[])=>{let[t,s]=(0,i.useState)(e),r=(0,i.useCallback)(e=>{s(t=>t.map(t=>t.id===e?{...t,time:t.time+1}:t))},[]),a=t.filter(e=>e.completed).length,o=t.find(e=>e.isRunning);return{tasks:t,addTask:e=>{s([...t,{id:Date.now().toString(),text:e,completed:!1,time:0,isRunning:!1}])},toggleTask:e=>{s(t.map(t=>t.id===e?{...t,completed:!t.completed}:t))},deleteTask:e=>{s(t.filter(t=>t.id!==e))},editTask:(e,r)=>{s(t.map(t=>t.id===e?{...t,text:r}:t))},toggleTaskTimer:e=>{s(t.map(t=>t.id===e?{...t,isRunning:!t.isRunning}:{...t,isRunning:!1}))},stopAllTasks:()=>{s(e=>e.map(e=>({...e,isRunning:!1})))},incrementTaskTime:r,completedCount:a,runningTask:o}})(k),{focusTime:S,incrementFocusTime:j}=(0,v.O)(),[C,N]=(0,i.useState)(!1),T=C||!!b;return(0,i.useEffect)(()=>{let e;return T&&(e=window.setInterval(()=>{j()},1e3)),()=>{e&&clearInterval(e)}},[T,j]),(0,i.useEffect)(()=>{let e;return b&&(e=window.setInterval(()=>{y(b.id)},1e3)),()=>{e&&clearInterval(e)}},[b,y]),(0,r.jsx)("div",{className:"w-md",children:(0,r.jsxs)("div",{className:"border-retro-border-dark bg-retro-bg-primary shadow-retro-xl rounded-none border-4 p-6",children:[(0,r.jsxs)("div",{className:`flex cursor-pointer items-center justify-between transition-all duration-300 select-none ${s?"mb-6":"mb-0"}`,onClick:()=>n(!s),children:[(0,r.jsx)("h1",{className:"text-retro-text-primary text-lg",children:"► TASKS"}),(0,r.jsx)("button",{className:"text-retro-text-primary hover:text-retro-text-secondary cursor-pointer transition-colors",children:s?(0,r.jsx)(a.A,{className:"h-5 w-5"}):(0,r.jsx)(o.A,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:`transition-all duration-300 ease-in-out ${s?"max-h-500 opacity-100":"max-h-0 overflow-hidden opacity-0"}`,children:[(0,r.jsx)(h,{time:(e=Math.floor(S/3600),t=Math.floor(S%3600/60),`${String(e).padStart(2,"0")}:${String(t).padStart(2,"0")}:${String(S%60).padStart(2,"0")}`),isRunning:T,onToggle:()=>{T?(N(!1),g()):N(!0)}}),(0,r.jsx)(f,{tasks:l,completedCount:x,totalCount:l.length,onAddTask:d,onToggleTask:c,onDeleteTask:m,onToggleTaskTimer:e=>{let t=l.find(t=>t.id===e);t&&t.isRunning&&N(!1),p(e)},onEditTask:u,formatTaskTime:w})]})]})})}},8450:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(546),i=s(2922),a=s(842),o=s(9873);function n({children:e}){let t=(0,i.useRouter)(),{isAuthenticated:s,isLoading:n,fetchUser:l}=(0,o.n)();return((0,a.useEffect)(()=>{l()},[l]),(0,a.useEffect)(()=>{n||s||t.replace("/login")},[n,s,t]),n)?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-900",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-4 border-gray-600 border-t-white"}),(0,r.jsx)("p",{className:"text-white",children:"로딩 중..."})]})}):s?(0,r.jsx)(r.Fragment,{children:e}):null}},9873:(e,t,s)=>{"use strict";s.d(t,{n:()=>a});var r=s(7122);let i="http://localhost:8080",a=(0,r.v)(e=>({user:null,isLoading:!0,isAuthenticated:!1,fetchUser:async()=>{try{e({isLoading:!0});let t=await fetch(`${i}/auth/me`,{credentials:"include"});if(t.ok){let s=await t.json();e({user:s,isAuthenticated:!0,isLoading:!1})}else e({user:null,isAuthenticated:!1,isLoading:!1})}catch(t){console.error("Failed to fetch user:",t),e({user:null,isAuthenticated:!1,isLoading:!1})}},logout:()=>{window.location.href=`${i}/auth/logout`}}))}},e=>{e.O(0,[536,365,580,758,358],()=>e(e.s=159)),_N_E=e.O()}]);