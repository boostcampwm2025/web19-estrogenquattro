# 브라우저 테스트 계획

> PR #113 이후 머지된 기능들과 Open PR들의 브라우저 수동 테스트 가이드

**서비스 URL**: https://jandiplease.duckdns.org/

---

## 테스트 환경 준비

1. **브라우저 2개 준비** (Chrome + Firefox 또는 Chrome 시크릿 모드)
2. **GitHub 계정 2개** (멀티플레이어 테스트용)
3. **개발자 도구** 열어두기 (Console, Network 탭)

---

## 1. FocusTime 기능 테스트

### 1.1 다른 플레이어 집중 시간 표시 (#125)

**테스트 목적**: 서버에서 계산한 `currentSessionSeconds`가 정확히 표시되는지 확인

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 브라우저 A에서 로그인 후 집중 시작 | 타이머가 0초부터 시작 |
| 2 | 브라우저 B에서 다른 계정으로 로그인 | 같은 방에 배정됨 |
| 3 | 브라우저 B에서 A의 캐릭터 확인 | A의 집중 시간이 실시간으로 증가 (1초 단위) |
| 4 | 30초 기다린 후 비교 | 두 브라우저의 시간 표시가 ±2초 이내 |

**확인 포인트**:
- 음수 시간이 표시되지 않아야 함
- 시간이 갑자기 점프하지 않아야 함

---

### 1.2 새로고침 시 FocusTime 복원 (#134)

**테스트 목적**: 새로고침해도 집중 상태와 시간이 유지되는지 확인

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 로그인 후 Task 생성 | Task 목록에 추가됨 |
| 2 | Task 클릭하여 집중 시작 | 타이머 시작, 상태 "집중 중" |
| 3 | 1분 정도 집중 후 F5 새로고침 | - |
| 4 | 페이지 로드 완료 | 집중 상태 유지, 시간 연속됨 (예: 60초→62초) |

**확인 포인트**:
- 집중 상태가 "휴식"으로 초기화되지 않아야 함
- `baseFocusSeconds`가 올바르게 복원되어야 함

---

### 1.3 탭 비활성화 시 타이머 정확도 (#134)

**테스트 목적**: 탭을 비활성화했다가 돌아와도 시간이 정확한지 확인

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 집중 시작, 현재 시간 기록 (예: 10초) | - |
| 2 | 다른 탭으로 이동 (5분간) | - |
| 3 | 원래 탭으로 복귀 | 시간이 310초 (5분 10초) 근처로 표시 |

**확인 포인트**:
- `setInterval` 쓰로틀링으로 인한 시간 손실 없어야 함
- 로컬/원격 플레이어 모두 확인

---

### 1.4 집중 중 Task 이름 변경 전파 (#136)

**테스트 목적**: Task 이름 수정이 다른 플레이어에게 실시간 반영되는지 확인

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 브라우저 A: "코딩하기" Task로 집중 시작 | 말풍선에 "코딩하기" 표시 |
| 2 | 브라우저 B: A의 캐릭터 확인 | "코딩하기" 말풍선 보임 |
| 3 | 브라우저 A: Task 이름을 "리뷰하기"로 수정 | - |
| 4 | 브라우저 B: A의 캐릭터 확인 | 말풍선이 "리뷰하기"로 변경됨 |

**확인 포인트**:
- 타이머가 리셋되지 않아야 함
- 집중 상태가 유지되어야 함

---

### 1.5 개별 Task 집중 시간 저장 (#170)

**테스트 목적**: Task별로 집중 시간이 정확히 누적되는지 확인

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | Task A 생성 | totalFocusSeconds: 0 |
| 2 | Task A 클릭하여 집중 시작 | 타이머 시작 |
| 3 | 2분 후 휴식 | - |
| 4 | Task A 확인 | totalFocusSeconds: 약 120초 |
| 5 | Task B 생성 후 집중 1분 → 휴식 | - |
| 6 | Task A, B 확인 | A: 120초, B: 60초 |
| 7 | 새로고침 후 확인 | 값 유지됨 |

**확인 포인트**:
- 서버 DB에 저장되어야 함 (새로고침 후에도 유지)
- 태스크 전환 시 이전 태스크에 시간 누적

---

### 1.6 집중 시간 초 단위 저장 (#168)

**테스트 목적**: 59초 미만의 집중 시간도 손실 없이 저장되는지 확인

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | Task 생성 후 집중 시작 | - |
| 2 | 정확히 45초 후 휴식 | - |
| 3 | Task의 집중 시간 확인 | 45초로 표시 (0분이 아님) |
| 4 | 다시 30초 집중 후 휴식 | 75초 (1분 15초)로 누적 |

**확인 포인트**:
- 분 단위 반올림/버림 없이 초 단위로 정확히 저장

---

## 2. 펫 시스템 테스트 (#171)

### 2.1 펫 가챠

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 프로필 → 펫 탭 이동 | 펫 UI 표시 |
| 2 | 포인트 확인 | 현재 포인트 표시 |
| 3 | 가챠 버튼 클릭 | 포인트 차감, 펫 획득 연출 |
| 4 | 인벤토리 확인 | 새 펫 추가됨 |

### 2.2 펫 먹이주기/진화

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 보유 펫 선택 | 상세 정보 표시 (EXP 바) |
| 2 | 먹이주기 | EXP 증가, 포인트 차감 |
| 3 | EXP 최대 도달 시 진화 | 다음 단계 펫으로 변경 |

### 2.3 대표 펫 장착

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 펫 선택 후 장착 버튼 | 대표 펫 변경됨 |
| 2 | 새로고침 | 장착 펫 유지 |
| 3 | 다른 플레이어가 내 캐릭터 확인 | 장착한 펫 표시 |

### 2.4 중복 가챠 처리

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 이미 3단계까지 진화한 펫의 1단계가 가챠에서 나옴 | - |
| 2 | 인벤토리 확인 | 1단계 펫이 중복 추가되지 않음 |
| 3 | 도감 확인 | 이미 기록되어 있음 |

---

## 3. 프로필/히트맵 테스트 (#147)

### 3.1 히트맵 표시

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 캐릭터 클릭 → 프로필 모달 | 히트맵 영역 표시 |
| 2 | 히트맵 확인 | 최근 1년간 활동 표시 |
| 3 | 특정 날짜 호버 | 해당 날짜의 활동 정보 툴팁 |

### 3.2 일별 집중시간 조회

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 프로필 모달 열기 | 오늘의 집중시간 표시 |
| 2 | 집중 1분 → 휴식 | - |
| 3 | 프로필 다시 열기 | 집중시간 증가 반영 |

---

## 4. GitHub 폴링 테스트 (#161)

### 4.1 커밋 감지

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | GitHub에 커밋 push | - |
| 2 | 30초~1분 대기 | 게임 내 알림/프로그레스바 증가 |
| 3 | 기여도 목록 확인 | 내 기여도 증가 |

### 4.2 PR 감지

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | GitHub에 PR 생성 | - |
| 2 | 30초~1분 대기 | 프로그레스바 +5% |

---

## 5. UI/UX 테스트 (#178, #161)

### 5.1 음악 플레이어 상태 복원

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 음악 재생, 볼륨 50%로 설정 | - |
| 2 | 새로고침 | 볼륨 50% 유지, 마지막 곡 복원 |
| 3 | 볼륨 0으로 설정 | 음소거 아이콘으로 변경 |

### 5.2 창 크기 조절

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 브라우저 창 크기 조절 | 카메라 여백 자동 재계산 |
| 2 | 맵이 중앙에 위치 | 상하좌우 여백 동일 |

---

## 6. Open PR 테스트 (머지 전 확인용)

### 6.1 타인의 Task 조회 (#185)

> ⚠️ 아직 머지되지 않음 - 머지 후 테스트

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 다른 플레이어 캐릭터 클릭 | 프로필 모달 |
| 2 | Task 탭 확인 | 해당 플레이어의 Task 목록 표시 |

### 6.2 소켓 연결 끊김 감지 (#177)

> ⚠️ 아직 머지되지 않음 - 머지 후 테스트

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 개발자 도구 → Network → Offline 체크 | - |
| 2 | 화면 확인 | "서버와의 연결이 끊어졌습니다. 재연결 시도 중..." 오버레이 |
| 3 | Online으로 복구 | 오버레이 사라짐, 정상 동작 |

### 6.3 소켓 이벤트 응답 확인 (#176)

> ⚠️ 아직 머지되지 않음 - 머지 후 테스트

| 단계 | 행동 | 예상 결과 |
|------|------|----------|
| 1 | 집중 시작 | 서버에서 ack 응답 (Console에서 확인) |
| 2 | 서버 에러 시뮬레이션 (가능하면) | 롤백 처리, 에러 메시지 |

---

## 테스트 체크리스트

### 필수 테스트 (Merged PRs)

- [ ] 1.1 다른 플레이어 집중 시간 표시
- [ ] 1.2 새로고침 시 FocusTime 복원
- [ ] 1.3 탭 비활성화 시 타이머 정확도
- [ ] 1.4 집중 중 Task 이름 변경 전파
- [ ] 1.5 개별 Task 집중 시간 저장
- [ ] 1.6 집중 시간 초 단위 저장
- [ ] 2.1 펫 가챠
- [ ] 2.2 펫 먹이주기/진화
- [ ] 2.3 대표 펫 장착
- [ ] 2.4 중복 가챠 처리
- [ ] 3.1 히트맵 표시
- [ ] 3.2 일별 집중시간 조회
- [ ] 4.1 GitHub 커밋 감지
- [ ] 4.2 GitHub PR 감지
- [ ] 5.1 음악 플레이어 상태 복원
- [ ] 5.2 창 크기 조절

### Open PR 테스트 (머지 후)

- [ ] 6.1 타인의 Task 조회 (#185)
- [ ] 6.2 소켓 연결 끊김 감지 (#177)
- [ ] 6.3 소켓 이벤트 응답 확인 (#176)

---

## 버그 발견 시 기록 양식

```markdown
### 버그 제목

**관련 PR**: #번호
**재현 단계**:
1.
2.
3.

**예상 동작**:
**실제 동작**:
**스크린샷**: (있으면 첨부)
**Console 에러**: (있으면 복사)
```
