# 주말 버그 목록

> 2026-01-23 기준 열린 이슈 정리

---

## 탭 비활성화 관련 (Background Tab Issues)

브라우저 탭이 백그라운드 상태일 때 발생하는 문제들

- **#217** - 탭 복귀 시 이미 만료된 채팅 말풍선이 표시되는 문제
  - 원인: 브라우저가 백그라운드 탭의 타이머를 throttle함
  - 해결: 채팅 이벤트에 timestamp 포함, 탭 복귀 시 만료 여부 판단

- **#216** - 탭 복귀 시 내 아바타가 다른 캐릭터 위에 표시되는 문제
  - 원인: 백그라운드 상태에서 위치 동기화 문제
  - 해결: visibility change 이벤트에서 위치 재동기화

---

## 네트워크/연결 안정성

서버 연결 및 외부 API 호출 관련 문제들

- ~~**#210** - 서버 연결 끊김 시 자동 재연결이 되지 않음~~ ✅ (PR #226)
  - 원인: Socket.io reconnection 옵션 미설정
  - 해결: 수동 새로고침 버튼 추가 (자동 재연결 대신 안정적인 방식 선택)

- ~~**#150** - GitHub API 네트워크 에러 시 서버 크래시~~ ✅ (PR #227)
  - 원인: fetch 호출에 try-catch 누락
  - 해결: try-catch 추가, 에러 시 30초 후 재시도

- **#218** - 사용자 감소 시에도 메모리가 해제되지 않는 현상
  - 원인: GC 관련 문제 (리소스 정리 로직 점검 필요)
  - 해결: 소켓 해제 시 폴링 스케줄, 이벤트 리스너 정리 확인

---

## 인증/세션 관리

로그인 및 토큰 관련 문제들

- ~~**#212** - REST API 401 응답 시 재로그인 유도 처리 필요~~ ✅ (PR #231)
  - 원인: 401 응답에 대한 특수 처리 없음
  - 해결: 401 감지 시 재로그인 안내 모달 표시

- **#123** - OAuth 로그인 후 URL이 /auth/callback/으로 남아있음
  - 원인: Next.js SSG에서 router.replace가 URL 업데이트 안됨
  - 해결: window.location.replace 사용

---

## 프로그레스바/기여도

게임 내 프로그레스바 및 기여도 표시 관련 문제들

- **#214** - 서버 재시작 시 프로그레스바/기여도 상태 초기화됨
  - 원인: roomStates가 메모리에만 저장됨
  - 해결: DB 또는 Redis에 영속화 + 서버 시작 시 복원

- **#201** - 프로그레스바 업데이트가 플레이어마다 다른 시점에 반영됨
  - 원인: 브로드캐스트 타이밍 문제 추정
  - 해결: 원인 파악 후 동기화 로직 점검

- **#198** - 기여도 목록이 0으로 표시되는 버그
  - 원인: 미파악 (재현 조건 확인 필요)
  - 해결: 재현 후 원인 파악

---

## UI 버그

사용자 인터페이스 관련 문제들

- **#211** - callback 페이지에서 불필요한 폰트 preload 경고 발생
  - 원인: 리다이렉트 전에 폰트 preload됨
  - 해결: callback 페이지 폰트 preload 비활성화

---

## 에셋 보안

클라이언트 에셋 노출 관련 문제

- **#219** - 맵과 펫 이미지가 클라이언트에서 공개 접근 가능
  - 원인: frontend/public/assets에 모든 이미지 저장
  - 해결: 팀 논의 필요 (백엔드 서빙, 난독화, 실루엣 대체 등)

---

## 코드 품질

리팩토링 및 테스트 관련 작업

- **#204** - FocusTime 상태 관리 중복 제거 및 상수 사용 일관성 개선
  - 작업: isFocusTimerRunning 제거, FOCUS_STATUS 상수 일관 사용

- **#182** - FocusTime 게이트웨이 에러 핸들링 테스트 추가
  - 작업: handleFocusing/Resting/FocusTaskUpdating 테스트 작성

---

## 기능/문서

신규 기능 및 문서화 작업

- **#162** - 자정 기준 일일 데이터 초기화 및 정산
  - 작업: @Cron 스케줄러로 집중시간 정산, 투두 이월 구현

- **#191** - 마이그레이션 오류 해결 방법 문서화
  - 작업: 새 DB에서 마이그레이션 실패 시 해결 방법 문서화

---

## 작업 순서

작은 버그부터 빠르게 처리

### 1단계: 빠른 수정 (Quick Wins)
1. #123 - OAuth 로그인 후 URL 문제 (window.location.replace로 변경)
2. #211 - callback 페이지 폰트 preload 경고

### 2단계: 단순 버그 수정
3. ~~#150 - GitHub API 에러 시 서버 크래시 (try-catch 추가)~~ ✅
4. ~~#210 - 자동 재연결 안됨 (새로고침 버튼 추가)~~ ✅
5. ~~#212 - 401 응답 시 재로그인 유도~~ ✅

### 3단계: 탭 비활성화 관련
6. #217 - 탭 복귀 시 채팅 말풍선 문제
7. #216 - 탭 복귀 시 아바타 위치 문제

### 4단계: 논의/원인 파악 필요
8. #219 - 맵/펫 이미지 공개 접근 가능 (팀 논의 필요)
9. #198 - 기여도 목록 0 표시 버그
10. #201 - 프로그레스바 동기화 버그

### 5단계: 큰 작업
11. #218 - 메모리 누수 (프로파일링 필요)
12. #214 - 서버 재시작 시 상태 초기화 (영속화 작업)
13. #162 - 자정 기준 데이터 초기화 (신규 기능)

### 6단계: 코드 품질/문서
14. #204 - FocusTime 상태 관리 리팩토링
15. #182 - FocusTime 게이트웨이 테스트 추가
16. #191 - 마이그레이션 문서화
